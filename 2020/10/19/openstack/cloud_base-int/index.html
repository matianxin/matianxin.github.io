

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/github-mark.png">
  <link rel="icon" href="/img/github-mark.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Matianxin">
  <meta name="keywords" content="Openstack">
  
    <meta name="description" content="cloudbase-init">
<meta property="og:type" content="article">
<meta property="og:title" content="cloudbase-init">
<meta property="og:url" content="http://maitianxin.github.io/2020/10/19/openstack/cloud_base-int/index.html">
<meta property="og:site_name" content="圣特伦特星">
<meta property="og:description" content="cloudbase-init">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-10-19T02:00:00.000Z">
<meta property="article:modified_time" content="2024-02-26T07:11:06.697Z">
<meta property="article:author" content="Matianxin">
<meta property="article:tag" content="Openstack">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>cloudbase-init - 圣特伦特星</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"maitianxin.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>圣特伦特星</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="cloudbase-init"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2020-10-19 10:00" pubdate>
          2020年10月19日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          2.6k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          22 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">cloudbase-init</h1>
            
            
              <div class="markdown-body">
                
                <p><strong>官方文档: <a target="_blank" rel="noopener" href="https://cloudbase-init.readthedocs.io/en/latest/intro.html">https://cloudbase-init.readthedocs.io/en/latest/intro.html</a></strong></p>
<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p><strong>Intro</strong><br>The open source project cloudbase-init is a service conceived and maintained by Cloudbase Solutions Srl, currently working on NT systems. It was designed to initialize and configure guest operating systems under OpenStack, OpenNebula, CloudStack, MaaS and many others. Under Cloudbase page, stable and beta installers can be found and the service itself is very easy to configure through configuration files. It can also customize instances based on user input like local scripts and data.</p>
<p>More details on how you can use this can be found under Tutorial.</p>
<p><strong>Portable cloud initialization service</strong><br>The main goal of this project is to provide guest cloud initialization for Windows and other operating systems. The architecture of the project is highly flexible and allows extensions for additional clouds and plugins.</p>
<p>There’s no limitation in the type of supported hypervisors. This service can be used on instances running on Hyper-V, KVM, Xen, ESXi etc.</p>
<p><strong>Binaries</strong></p>
<p>Stable installers:</p>
<p><a target="_blank" rel="noopener" href="https://www.cloudbase.it/downloads/CloudbaseInitSetup_Stable_x64.msi">https://www.cloudbase.it/downloads/CloudbaseInitSetup_Stable_x64.msi</a><br><a target="_blank" rel="noopener" href="https://www.cloudbase.it/downloads/CloudbaseInitSetup_Stable_x86.msi">https://www.cloudbase.it/downloads/CloudbaseInitSetup_Stable_x86.msi</a></p>
<p>Beta installers:</p>
<p><a target="_blank" rel="noopener" href="https://www.cloudbase.it/downloads/CloudbaseInitSetup_x64.msi">https://www.cloudbase.it/downloads/CloudbaseInitSetup_x64.msi</a><br><a target="_blank" rel="noopener" href="https://www.cloudbase.it/downloads/CloudbaseInitSetup_x86.msi">https://www.cloudbase.it/downloads/CloudbaseInitSetup_x86.msi</a></p>
<p>Use a x64 installer on 64 bit versions of Windows and the x86 one exclusively on 32 bit versions.</p>
<h3 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h3><p><strong>Tutorial</strong><br>First, download your desired type of installer from here, then install it and fill in configuration options which suits you best. Based on the current selected cloudbase-init installer architecture, it’ll be available under C:\Program Files or C:\Program Files (x86) as Cloudbase Solutions\Cloudbase-Init directory. There, are located some folders of interest like:</p>
<p>bin - Executable files and other binaries.<br>conf - Configuration files holding miscellaneous options.<br>log - Here are the cloudbase-init logs.</p>
<p>LocalScripts - User supplied scripts.</p>
<p>Python - Bundle of executable and library files to support Python scripts and core execution.</p>
<p>After install, cloudbase-init acts like a 2-step service which will read metadata using Services and will pass that to the executing Plugins, this way configuring all the supported things. Depending on the platform, some plugins may request reboots.</p>
<p><strong>Sysprepping</strong><br>The System Preparation (Sysprep) tool prepares an installation of Windows for duplication, auditing, and customer delivery. Duplication, also called imaging, enables you to capture a customized Windows image that you can reuse throughout an organization. The Sysprep phase uses the “Unattend.xml” which implies the service to run using the “cloudbase-init-unattend.conf” configuration file.</p>
<p><strong>Configuration file</strong><br>In the chosen installation path, under the conf directory, are present two config files named “cloudbase-init.conf” and “cloudbase-init-unattend.conf”. These can hold various config options for picking up the desired available services and plugins ready for execution and also customizing user experience.</p>
<p>Explained example of configuration file:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[DEFAULT]<br><span class="hljs-comment"># What user to create and in which group(s) to be put.</span><br><span class="hljs-attribute">username</span>=Admin<br><span class="hljs-attribute">groups</span>=Administrators<br><span class="hljs-attribute">inject_user_password</span>=<span class="hljs-literal">true</span>  # Use password <span class="hljs-keyword">from</span> the metadata (<span class="hljs-keyword">not</span> random).<br><span class="hljs-comment"># Which devices to inspect for a possible configuration drive (metadata).</span><br><span class="hljs-attribute">config_drive_raw_hhd</span>=<span class="hljs-literal">true</span><br><span class="hljs-attribute">config_drive_cdrom</span>=<span class="hljs-literal">true</span><br><span class="hljs-comment"># Path to tar implementation from Ubuntu.</span><br><span class="hljs-attribute">bsdtar_path</span>=C:\Program Files (x86)\Cloudbase Solutions\Cloudbase-Init\bin\bsdtar.exe<br><span class="hljs-comment"># Logging debugging level.</span><br><span class="hljs-attribute">verbose</span>=<span class="hljs-literal">true</span><br><span class="hljs-attribute">debug</span>=<span class="hljs-literal">true</span><br><span class="hljs-comment"># Where to store logs.</span><br><span class="hljs-attribute">logdir</span>=C:\Program Files (x86)\Cloudbase Solutions\Cloudbase-Init\log\<br><span class="hljs-attribute">logfile</span>=cloudbase-init-unattend.log<br><span class="hljs-attribute">default_log_levels</span>=comtypes=INFO,suds=INFO,iso8601=WARN<br>logging_serial_port_settings=<br><span class="hljs-comment"># Enable MTU and NTP plugins.</span><br><span class="hljs-attribute">mtu_use_dhcp_config</span>=<span class="hljs-literal">true</span><br><span class="hljs-attribute">ntp_use_dhcp_config</span>=<span class="hljs-literal">true</span><br><span class="hljs-comment"># Where are located the user supplied scripts for execution.</span><br><span class="hljs-attribute">local_scripts_path</span>=C:\Program Files (x86)\Cloudbase Solutions\Cloudbase-Init\LocalScripts\<br><span class="hljs-comment"># Services that will be tested for loading until one of them succeeds.</span><br><span class="hljs-attribute">metadata_services</span>=cloudbaseinit.metadata.services.configdrive.ConfigDriveService,<br>                  cloudbaseinit.metadata.services.httpservice.HttpService,<br>                  cloudbaseinit.metadata.services.ec2service.EC2Service,<br>                  cloudbaseinit.metadata.services.maasservice.MaaSHttpService<br><span class="hljs-comment"># What plugins to execute.</span><br><span class="hljs-attribute">plugins</span>=cloudbaseinit.plugins.common.mtu.MTUPlugin,<br>        cloudbaseinit.plugins.common.sethostname.SetHostNamePlugin<br><span class="hljs-comment"># Miscellaneous.</span><br><span class="hljs-attribute">allow_reboot</span>=<span class="hljs-literal">false</span>    # allow the<span class="hljs-built_in"> service </span><span class="hljs-keyword">to</span> reboot the<span class="hljs-built_in"> system</span><br><span class="hljs-built_in"></span><span class="hljs-attribute">stop_service_on_exit</span>=<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure>

<p>The “cloudbase-init-unattend.conf” configuration file is similar to the default one and is used by the Sysprepping phase. It was designed for the scenario where the minimum user intervention is required and it only runs the MTU and host name plugins, leaving the image ready for further initialization cases.</p>
<p>More of these explained options are available under the Services, Plugins and Userdata documentation.</p>
<p>A complete list of config options can be found at Configuration options reference.</p>
<p><strong>File execution</strong></p>
<p>Cloudbase-init has the ability to execute user provided scripts, usually found in the default path C:\Program Files (x86)\Cloudbase Solutions\Cloudbase-Init\LocalScripts, through a specific plugin for doing it. Depending on the platform used, the files should be valid PowerShell, Python, Batch or Bash scripts. The userdata can be also a PEM certificate, in a cloud-config format or a MIME content. The user data plugin is capable of executing various script types and exit code value handling.</p>
<p>Based on their exit codes, you can instruct the system to reboot or even re-execute the plugin on the next boot:</p>
<p>1001 - reboot and don’t run the plugin again on next boot<br>1002 - don’t reboot now and run the plugin again on next boot<br>1003 - reboot and run the plugin again on next boot</p>
<h3 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h3><p><strong>Services</strong><br>A metadata service has the role of getting the guest provided data (configuration information) and exposing it to the Plugins for a general and basic initialization of the instance. These sub-services can change their behavior according to custom configuration options documented below.</p>
<p><strong>Configuring available services</strong><br>Any of these classes can be specified manually in the configuration file under metadata_services option. Based on this option, the service loader will search across these providers in the defined order and load the first one that is available.</p>
<p>For more details on doing this, see configuration file in Tutorial.</p>
<p><strong>OpenStack (web API)</strong><br>classcloudbaseinit.metadata.services.httpservice.HttpService<br>A complete service which supports password related capabilities and can be usually accessed at the <a target="_blank" rel="noopener" href="http://169.254.169.254/">http://169.254.169.254/</a> magic URL. The magic URL can be customized using the metadata_base_url config option. A default value of True for add_metadata_private_ip_route option is used to add a route for the IP address to the gateway. This is needed for supplying a bridge between different VLANs in order to get access to the web server.</p>
<p>Metadata version used: latest.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>WinRM authentication certificates</li>
<li>static network configuration</li>
<li>admin user password</li>
<li>post admin user password (only once)</li>
<li>user data</li>
</ul>
<p>Config options for openstack section:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso">metadata_base_url (<span class="hljs-built_in">string</span>: “http:<span class="hljs-comment">//169.254.169.254/”) add_metadata_private_ip_route (bool: True)</span><br>https_allow_insecure (bool: <span class="hljs-literal">False</span>)<br>https_ca_bundle (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br></code></pre></td></tr></table></figure>
<p>Config options for default section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">retry_count (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">5</span>)<br>retry_count_interval (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>

<p><strong>OpenStack (configuration drive)</strong><br>classcloudbaseinit.metadata.services.configdrive.ConfigDriveService<br>This is similar to the web API, but it “serves” its files locally without requiring network access. The data is generally retrieved from a cdrom, vfat or raw disks&#x2F;partitions by enabling selective lookup across different devices. Use the types option to specify which types of config drive content the service will search for and also on which devices using the locations option.</p>
<p>It will search for metadata:</p>
<p>in mounted optical units<br>directly in the physical disk bytes<br>by exploring the physical disk as a vfat drive; which requires mtools (specified by the mtools_path option in the Default section)</p>
<p>This service is usually faster than the HTTP twin, as there is no timeout waiting for the network to be up.</p>
<p>Metadata version used: latest.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>authentication certificates</li>
<li>static network configuration</li>
<li>admin user password</li>
<li>user data</li>
</ul>
<p>Config options for config_drive section:</p>
<ul>
<li>raw_hdd (bool: True)</li>
<li>cdrom (bool: True)</li>
<li>vfat (bool: True)</li>
</ul>
<p>types (list: [“vfat”, “iso”])</p>
<p>locations (list: [“cdrom”, “hdd”, “partition”])</p>
<p>NoCloud configuration drive<br>classcloudbaseinit.metadata.services.nocloudservice.NoCloudConfigDriveService<br>NoCloudConfigDriveService is similar to OpenStack config drive metadata in terms of the medium on which the data is provided (as an attached ISO, partition or disk) and similar to the EC2 metadata in terms of how the metadata files are named and structured.</p>
<p>The metadata is provided on a config-drive (vfat or iso9660) with the label cidata or CIDATA.</p>
<p>The folder structure for NoCloud is:<br>&#x2F;user-data<br>&#x2F;meta-data</p>
<p>The user-data and meta-data files respect the EC2 metadata service format.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>static network configuration (Debian and network config v1 formats)</li>
<li>user data</li>
</ul>
<p>Config options for config_drive section:</p>
<ul>
<li>raw_hdd (bool: True)</li>
<li>cdrom (bool: True)</li>
<li>vfat (bool: True)</li>
</ul>
<p>types (list: [“vfat”, “iso”])</p>
<p>locations (list: [“cdrom”, “hdd”, “partition”])</p>
<p>Example metadata:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">instance</span>-id: windows1<br><span class="hljs-attribute">network</span>-interfaces: |<br>  <span class="hljs-attribute">iface</span> Ethernet0 inet static<br>  <span class="hljs-attribute">address</span> <span class="hljs-number">10.0.0.2</span><br>  <span class="hljs-attribute">network</span> <span class="hljs-number">10.0.0.0</span><br>  <span class="hljs-attribute">netmask</span> <span class="hljs-number">255.255.255.0</span><br>  <span class="hljs-attribute">broadcast</span> <span class="hljs-number">10.0.0.255</span><br>  <span class="hljs-attribute">gateway</span> <span class="hljs-number">10.0.0.1</span><br>  <span class="hljs-attribute">hwaddress</span> ether <span class="hljs-number">00</span>:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span><br><span class="hljs-attribute">hostname</span>: windowshost1<br></code></pre></td></tr></table></figure>

<p>Cloud-init’s network config v1 format can be used to configure static network configuration. The configuration file should be named network-config and should be present at the same folder level with the meta-data and user-data file. If no network-config is found, cloudbase-init will use the network-interfaces value from the metadata (if any).</p>
<p>The following network config types are implemented: physical, bond, vlan and nameserver. Unsupported config types: bridge and route.</p>
<p>Example:</p>
<figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">version</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1</span><br><span class="hljs-attribute">config</span><span class="hljs-punctuation">:</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">type: physical</span><br>     <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">interface0</span><br>     <span class="hljs-attribute">mac_address</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;52:54:00:12:34:00&quot;</span><br>     <span class="hljs-attribute">mtu</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1450</span><br>     <span class="hljs-attribute">subnets</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">type: static</span><br>          <span class="hljs-attribute">address</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.10</span><br>          <span class="hljs-attribute">netmask</span><span class="hljs-punctuation">:</span> <span class="hljs-string">255.255.255.0</span><br>          <span class="hljs-attribute">dns_nameservers</span><span class="hljs-punctuation">:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">192.168.1.11</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">type: bond</span><br>     <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">bond0</span><br>     <span class="hljs-attribute">bond_interfaces</span><span class="hljs-punctuation">:</span><br>       <span class="hljs-bullet">-</span> <span class="hljs-string">gbe0</span><br>       <span class="hljs-bullet">-</span> <span class="hljs-string">gbe1</span><br>     <span class="hljs-attribute">mac_address</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;52:54:00:12:34:00&quot;</span><br>     <span class="hljs-attribute">params</span><span class="hljs-punctuation">:</span><br>       <span class="hljs-attribute">bond-mode</span><span class="hljs-punctuation">:</span> <span class="hljs-string">active-backup</span><br>       <span class="hljs-attribute">bond-lacp-rate</span><span class="hljs-punctuation">:</span> <span class="hljs-string">false</span><br>     <span class="hljs-attribute">mtu</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1450</span><br>     <span class="hljs-attribute">subnets</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">type: static</span><br>          <span class="hljs-attribute">address</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.10</span><br>          <span class="hljs-attribute">netmask</span><span class="hljs-punctuation">:</span> <span class="hljs-string">255.255.255.0</span><br>          <span class="hljs-attribute">dns_nameservers</span><span class="hljs-punctuation">:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">192.168.1.11</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">type: vlan</span><br>     <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vlan0</span><br>     <span class="hljs-attribute">vlan_link</span><span class="hljs-punctuation">:</span> <span class="hljs-string">eth1</span><br>     <span class="hljs-attribute">vlan_id</span><span class="hljs-punctuation">:</span> <span class="hljs-string">150</span><br>     <span class="hljs-attribute">mac_address</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;52:54:00:12:34:00&quot;</span><br>     <span class="hljs-attribute">mtu</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1450</span><br>     <span class="hljs-attribute">subnets</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">type: static</span><br>          <span class="hljs-attribute">address</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.1.10</span><br>          <span class="hljs-attribute">netmask</span><span class="hljs-punctuation">:</span> <span class="hljs-string">255.255.255.0</span><br>          <span class="hljs-attribute">dns_nameservers</span><span class="hljs-punctuation">:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">192.168.1.11</span><br>   <span class="hljs-bullet">-</span> <span class="hljs-string">type: nameserver</span><br>     <span class="hljs-attribute">address</span><span class="hljs-punctuation">:</span><br>       <span class="hljs-bullet">-</span> <span class="hljs-string">192.168.23.2</span><br>       <span class="hljs-bullet">-</span> <span class="hljs-string">8.8.8.8</span><br>     <span class="hljs-attribute">search</span><span class="hljs-punctuation">:</span> <span class="hljs-string">acme.local</span><br>More information on the NoCloud metadata service specifications can be found here.<br></code></pre></td></tr></table></figure>

<p><strong>Amazon EC2</strong></p>
<p>classcloudbaseinit.metadata.services.ec2service.EC2Service<br>This is similar to the OpenStack HTTP service but is using a different format for metadata endpoints and has general capabilities.</p>
<p>Metadata version used: 2009-04-04.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>user data</li>
</ul>
<p>Config options for ec2 section:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso">metadata_base_url (<span class="hljs-built_in">string</span>: “http:<span class="hljs-comment">//169.254.169.254/”) add_metadata_private_ip_route (bool: True)</span><br>https_allow_insecure (bool: <span class="hljs-literal">False</span>)<br>https_ca_bundle (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br></code></pre></td></tr></table></figure>
<p>Config options for default section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">retry_count (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">5</span>)<br>retry_count_interval (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>

<p>Note<br><a target="_blank" rel="noopener" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html</a></p>
<p><strong>Apache CloudStack</strong><br>classcloudbaseinit.metadata.services.cloudstack.CloudStack<br>Another web-based service which usually uses “10.1.1.1” or DHCP addresses for retrieving content. If no metadata can be found at the metadata_base_url, the service will look for the metadata at the DHCP server URL.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>admin user password</li>
<li>poll for, post, delete admin user password (each reboot)</li>
<li>user data</li>
</ul>
<p>Config options for cloudstack section:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lasso">metadata_base_url (<span class="hljs-built_in">string</span>: “http:<span class="hljs-comment">//10.1.1.1/”) password_server_port (int: 8080)</span><br>add_metadata_private_ip_route (bool: <span class="hljs-literal">True</span>)<br>https_allow_insecure (bool: <span class="hljs-literal">False</span>)<br>https_ca_bundle (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br></code></pre></td></tr></table></figure>
<p>Config options for default section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">retry_count (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">5</span>)<br>retry_count_interval (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>
<p>Note<br>By design, this service can update the password anytime, so it will cause the setuserpassword plugin to run at every boot and by security concerns, the password is deleted right after retrieval and no updating will occur until a new password is available on the server.</p>
<p><strong>OpenNebula Service</strong><br>classcloudbaseinit.metadata.services.opennebulaservice.OpenNebulaService<br>The OpenNebula provider is related to configuration drive and searches for a specific context file which holds all the available info. The provided details are exposed as bash variables gathered in a shell script.</p>
<p>Capabilities:</p>
<ul>
<li>hardcoded instance id to iid-dsopennebula</li>
<li>hostname</li>
<li>public keys</li>
<li>static network configuration</li>
<li>user data</li>
</ul>
<p>Config options for default section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">retry_count (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">5</span>)<br>retry_count_interval (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>

<p><strong>Ubuntu MaaS</strong><br>classcloudbaseinit.metadata.services.maasservice.MaaSHttpService<br>This metadata service usually works with instances on baremetal and uses web requests for retrieving the available exposed metadata. It uses OAuth to secure the requests.</p>
<p>Metadata version used: 2012-03-01.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>WinRM authentication certificates</li>
<li>static network configuration</li>
<li>user data</li>
</ul>
<p>Config options for maas section:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lasso">metadata_base_url (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br>oauth_consumer_key (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br>oauth_consumer_secret (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br>oauth_token_key (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br>oauth_token_secret (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br>https_allow_insecure (bool: <span class="hljs-literal">False</span>)<br>https_ca_bundle (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br></code></pre></td></tr></table></figure>
<p>Config options for default section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">retry_count (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">5</span>)<br>retry_count_interval (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>
<p>Note<br>By design, the configuration options are set by an agent called curtin which runs the hooks that set the config values. On Windows, these hooks need to be present in the root directory: Windows curtin hooks.</p>
<p><strong>Open Virtualization Format (OVF)</strong><br>classcloudbaseinit.metadata.services.ovfservice.OvfService<br>The OVF provider searches data from OVF environment ISO transport.</p>
<p>Capabilities:</p>
<ul>
<li>instance id (hardcoded to iid-ovf if not present)</li>
<li>hostname</li>
<li>public keys</li>
<li>admin user name</li>
<li>admin user password</li>
<li>user data</li>
</ul>
<p>Config options:</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">config_file_name (<span class="hljs-keyword">string</span>: “ovf-<span class="hljs-keyword">env</span>.xml”)<br>drive_label (<span class="hljs-keyword">string</span>: “OVF ENV”)<br>ns (<span class="hljs-keyword">string</span>: “oe”)<br></code></pre></td></tr></table></figure>

<p><strong>Packet Service</strong><br>classcloudbaseinit.metadata.services.packet.PacketService<br>Packet metadata service provides the metadata for baremetal servers at the magic URL <a target="_blank" rel="noopener" href="https://metadata.packet.net/">https://metadata.packet.net/</a>.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>post admin user password (only once)</li>
<li>user data</li>
<li>call home on successful provision</li>
</ul>
<p>Config options for packet section:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lasso">metadata_base_url (<span class="hljs-built_in">string</span>: “https:<span class="hljs-comment">//metadata.packet.net/”) https_allow_insecure (bool: False)</span><br>https_ca_bundle (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br></code></pre></td></tr></table></figure>
<p>Config options for default section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">retry_count (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">5</span>)<br>retry_count_interval (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>

<p><strong>Azure Service</strong><br>classcloudbaseinit.metadata.services.azureservice.AzureService<br>Azure metadata service provides the metadata for Microsoft Azure cloud platform.</p>
<p>Azure metadata is offered via multiple sources like HTTP metadata, config-drive metadata and KVP (Hyper-V Key-Value Pair Data Exchange). This implementation uses only HTTP and config-drive metadata sources.</p>
<p>Azure service implements the interface to notify the cloud provider when the instance has started provisioning, completed provisioning and if the provisioning failed.</p>
<p>Metadata version used: 2015-04-05.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>WinRM authentication certificates</li>
<li>admin user name</li>
<li>admin user password</li>
<li>user data</li>
<li>post RDP certificate thumbprint</li>
<li>provisioning status</li>
<li>Windows Update status</li>
<li>VM agent configuration</li>
<li>licensing configuration</li>
<li>ephemeral disk warning</li>
</ul>
<p>Config options for azure section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">transport_cert_store_name (<span class="hljs-built_in">string</span>: Windows Azure Environment”)<br></code></pre></td></tr></table></figure>
<p>Config options for default section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">retry_count (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">5</span>)<br>retry_count_interval (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>

<p><strong>Empty Metadata Service</strong><br>classcloudbaseinit.metadata.services.base.EmptyMetadataService<br>The empty metadata service can be used to run plugins that do not rely on metadata service information, like setting NTP, MTU, extending volumes, local scripts execution, licensing, etc.</p>
<p>It can be used also as a fallback metadata service, in case no other previous metadata service could be loaded.</p>
<p>EmptyMetadataService does not support the following plugins:<br>cloudbaseinit.plugins.windows.createuser.CreateUserPlugin<br>cloudbaseinit.plugins.common.setuserpassword.SetUserPasswordPlugin<br>cloudbaseinit.plugins.common.sshpublickeys.SetUserSSHPublicKeysPlugin<br>cloudbaseinit.plugins.windows.winrmcertificateauth.ConfigWinRMCertificateAuthPlugin</p>
<p>If any of the plugins defined above are executed, they will fail with exception NotExistingMetadataException. The reason for the hardcoded failure is that these plugins rely on metadata to execute correctly. If metadata like username or password is not provided, these plugins can lock or misconfigure the user, leading to unwanted problems.</p>
<p>Note<br>If a service returns an empty instance-id (like EmptyMetadataService does), all the plugins will be executed at every cloudbase-init run (reboot, service restart). Plugins that set NTP, MTU, extend volumes are idempotent and can be re-executed with no issues. Make sure that if you configure cloudbase-init to run local scripts, those local scripts are idempotent.</p>
<p><strong>VMware GuestInfo Service</strong><br>classcloudbaseinit.metadata.services.vmwareguestinfoservice.VMwareGuestInfoService<br>VMwareGuestInfoService is a metadata service which uses VMware’s rpctool to extract guest metadata and userdata configured for machines running on VMware hypervisors.</p>
<p>The VMware RPC tool used to query the instance metadata and userdata needs to be present at the config option path.</p>
<p>Both json and yaml are supported as metadata formats. The metadata &#x2F; userdata can be encoded in base64, gzip or gzip+base64.</p>
<p>Example metadata in yaml format:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">instance-id:</span> <span class="hljs-string">cloud-vm</span><br><span class="hljs-attr">local-hostname:</span> <span class="hljs-string">cloud-vm</span><br><span class="hljs-attr">admin-username:</span> <span class="hljs-string">cloud-username</span><br><span class="hljs-attr">admin-password:</span> <span class="hljs-string">Passw0rd</span><br><span class="hljs-attr">public-keys-data:</span> <span class="hljs-string">|</span><br><span class="hljs-string">  ssh-key 1</span><br><span class="hljs-string">  ssh-key 2</span><br></code></pre></td></tr></table></figure>
<p>This metadata content needs to be set as string in the guestinfo dictionary, thus needs to be converted to base64 (it is recommended to gzip it too). To convert to gzip+base64 format:</p>
<p>cat metadata.yml | gzip.exe -9 | base64.exe -w0<br>The output of the gzip+base64 conversion needs to be set in the instance guestinfo, along with the encoding of the metadata &#x2F; userdata.</p>
<p>For more information on how to achieve this, please check <a target="_blank" rel="noopener" href="https://github.com/vmware/cloud-init-vmware-guestinfo#configuration">https://github.com/vmware/cloud-init-vmware-guestinfo#configuration</a></p>
<p>This is an example how to set the information from the instance:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-variable">&lt;rpctool_path&gt;</span> <span class="hljs-string">&quot;info-set guestinfo.metadata &lt;gzip+base64-encoded-metadata&gt;&quot;</span><br><span class="hljs-variable">&lt;rpctool_path&gt;</span> <span class="hljs-string">&quot;info-set guestinfo.metadata.encoding gzip+base64&quot;</span><br><span class="hljs-variable">&lt;rpctool_path&gt;</span> <span class="hljs-string">&quot;info-set guestinfo.userdata &lt;gzip+base64-encoded-userdata&gt;&quot;</span><br><span class="hljs-variable">&lt;rpctool_path&gt;</span> <span class="hljs-string">&quot;info-set guestinfo.userdata.encoding gzip+base64&quot;</span><br></code></pre></td></tr></table></figure>

<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>admin user name</li>
<li>admin user password</li>
<li>user data</li>
</ul>
<p>Config options for vmwareguestinfo section:</p>
<p>vmware_rpctool_path (string: “%ProgramFiles%&#x2F;VMware&#x2F;VMware Tools&#x2F;rpctool.exe”)</p>
<p><strong>Google Compute Engine Service</strong><br>classcloudbaseinit.metadata.services.gceservice.GCEService<br>GCE metadata service provides the metadata for instances running on Google Compute Engine.</p>
<p>GCE metadata is offered via an internal HTTP metadata endpoint, reachable at the magic URL <a target="_blank" rel="noopener" href="http://metadata.google.internal/computeMetadata/v1/">http://metadata.google.internal/computeMetadata/v1/</a>. More information can be found in the GCE metadata documents.</p>
<p>To provide userdata to be executed by the instance (in cloud-config format, for example), use the user-data and user-data-encoding instance metadata keys.</p>
<p>Capabilities:</p>
<ul>
<li>instance id</li>
<li>hostname</li>
<li>public keys</li>
<li>user data</li>
</ul>
<p>Config options for gce section:</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lasso">metadata_base_url (<span class="hljs-built_in">string</span>: http:<span class="hljs-comment">//metadata.google.internal/computeMetadata/v1/”) https_allow_insecure (bool: False)</span><br>https_ca_bundle (<span class="hljs-built_in">string</span>: <span class="hljs-literal">None</span>)<br></code></pre></td></tr></table></figure>
<p>Config options for default section:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">retry_count (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">5</span>)<br>retry_count_interval (<span class="hljs-built_in">int</span>eger: <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>

<h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><p><strong>Plugins</strong><br>Plugins execute actions based on the metadata obtained by the loaded service. They are intended to configure the instance using data provided by the underlying cloud and by the user who created the instance. There are three stages for the plugins’ execution:</p>
<p>The PRE_NETWORKING stage (for setting up the network, before doing any valid web request.<br>The PRE_METADATA_DISCOVERY stage (additional configuration before the metadata service discovery).<br>The default MAIN stage, which holds the rest of the plugins which are (re)executed according to their saved status. The metadata service loaded needs to provide an instance id for the plugins to be able to have a saved status. If the metadata service cannot provide an instance id, the plugins state from the MAIN stage cannot be saved, and therefore, all plugins will be executed at every boot.<br>Note that the plugins from the two stages are executed each time the cloudbase-init service starts (those plugins do not have saved status).</p>
<p>Just before the MAIN stage, the metadata service can report to the cloud service that the provision started. After the MAIN stage ended, the metadata service can report to the cloud service that the provisioning completed successfully or failed.</p>
<p>Configuring selected plugins<br>By default, only a subset of plugins is executed. The plugins are:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-attr">[DEFAULT]</span><br>plugins = cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.mtu</span><span class="hljs-selector-class">.MTUPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.windows</span><span class="hljs-selector-class">.ntpclient</span><span class="hljs-selector-class">.NTPClientPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.sethostname</span><span class="hljs-selector-class">.SetHostNamePlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.windows</span><span class="hljs-selector-class">.createuser</span><span class="hljs-selector-class">.CreateUserPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.networkconfig</span><span class="hljs-selector-class">.NetworkConfigPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.windows</span><span class="hljs-selector-class">.licensing</span><span class="hljs-selector-class">.WindowsLicensingPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.sshpublickeys</span><span class="hljs-selector-class">.SetUserSSHPublicKeysPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.windows</span><span class="hljs-selector-class">.extendvolumes</span><span class="hljs-selector-class">.ExtendVolumesPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.userdata</span><span class="hljs-selector-class">.UserDataPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.setuserpassword</span><span class="hljs-selector-class">.SetUserPasswordPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.windows</span><span class="hljs-selector-class">.winrmlistener</span><span class="hljs-selector-class">.ConfigWinRMListenerPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.windows</span><span class="hljs-selector-class">.winrmcertificateauth</span><span class="hljs-selector-class">.ConfigWinRMCertificateAuthPlugin</span>, cloudbaseinit<span class="hljs-selector-class">.plugins</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.localscripts</span>.LocalScriptsPlugin<br></code></pre></td></tr></table></figure>
<p>A custom list of plugins can be specified through the plugins option in the configuration file.</p>
<p>For more details on doing this, see configuration file in Tutorial.</p>
<p><strong>Setting hostname (MAIN)</strong><br>classcloudbaseinit.plugins.common.sethostname.SetHostNamePlugin<br>Sets the instance hostname. The hostname gets truncated to 15 characters for Netbios compatibility reasons if netbios_host_name_compatibility is set.</p>
<p>Config options:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">netbios_host_name_compatibility (<span class="hljs-type">bool</span>: <span class="hljs-keyword">True</span>)<br></code></pre></td></tr></table></figure>
<p>Notes:<br>Requires support in the metadata service.<br>May require a system restart.</p>
<p><strong>Creating user (MAIN)</strong><br>classcloudbaseinit.plugins.windows.createuser.CreateUserPlugin<br>Creates (or updates if existing) a new user and adds it to a set of provided local groups. By default, it creates the user “Admin” under “Administrators” group, but this can be changed in the configuration file.</p>
<p>A random user password is set for the user. The password length is by default set to 20 and can be customized using the user_password_length configuration option.</p>
<p>If rename_admin_user is set to True, the user Administrator is renamed to the username config value or to the metadata service provided value.</p>
<p>Config options:</p>
<ul>
<li>username (string: “Admin”)</li>
<li>groups (list of strings: [“Administrators”])</li>
<li>user_password_length (int: 20)</li>
<li>rename_admin_user (bool: false)</li>
</ul>
<p>Notes:<br>The metadata service can provide the username. If the metadata service provides the admin username, it will override the username configuration value.</p>
<p><strong>Setting password (MAIN)</strong><br>classcloudbaseinit.plugins.common.setuserpassword.SetUserPasswordPlugin<br>Sets the cloud user’s password. If a password has been provided in the metadata during boot it will be used, otherwise a random password will be generated, encrypted with the user’s SSH public key and posted to the metadata provider.</p>
<p>An option called inject_user_password is set True by default to make available the use of metadata password which is found under the “admin_pass” field or through an URL request. If the option is set to False or if the password isn’t found in metadata, then an attempt of using an already set password is done (usually a random value by the CreateUserPlugin plugin). With first_logon_behaviour you can control what happens with the password at the next logon. If this option is set to “always”, the user will be forced to change the password at the next logon.</p>
<p>If it is set to “clear_text_injected_only”, the user will be forced to change the password only if the password is a clear text password, coming from the metadata. The last option is “no”, when the user is never forced to change the password.</p>
<p>Config options:</p>
<ul>
<li>username (string: “Admin”)</li>
<li>inject_user_password (bool: True)</li>
<li>first_logon_behaviour (string: “clear_text_injected_only”)</li>
<li>user_password_length (int: 20)</li>
</ul>
<p>Notes:<br>The metadata service may provide the username. If the metadata service provides the admin username, it will override the username configuration value.</p>
<p>May run at every boot to (re)set and post the password if the metadata service supports this behaviour.</p>
<p><strong>Static networking (MAIN)</strong><br>classcloudbaseinit.plugins.common.networkconfig.NetworkConfigPlugin<br>Statically configures each network adapter for which corresponding details are found into metadata. The details&#x2F;addresses association is done using MAC matching and if this fails, then name or interface index matching. The basic setting is based on IPv4 addresses, but it supports IPv6 addresses too if they are enabled and exposed to the metadata. The purpose of this plugin is to configure network adapters, for which the DHCP server is disabled, to have internet access and static IPs.</p>
<p>NIC teaming (bonding) is supported and uses NetLBFO implementation.</p>
<p>Notes:<br>Requires support in the metadata service.<br>May require a system restart.</p>
<p><strong>Saving public keys (MAIN)</strong><br>classcloudbaseinit.plugins.common.sshpublickeys.SetUserSSHPublicKeysPlugin<br>Creates an authorized_keys file in the user’s home directory containing the SSH keys provided in the metadata. It is needed by the plugin responsible for encrypting and setting passwords.</p>
<p>Config options:<br>username (string: “Admin”)</p>
<p>Notes:<br>Requires support in the metadata service. The metadata service provides the SSH public keys.</p>
<p>The metadata service can provide the username. If the metadata service provides the admin username, it will override the username configuration value.</p>
<p><strong>Volume expanding (MAIN)</strong><br>classcloudbaseinit.plugins.windows.extendvolumes.ExtendVolumesPlugin<br>Extends automatically a disk partition to its maximum size. This is useful when booting images with different flavors. By default, all the volumes are extended, but you can select specific ones by populating with their indexes the volumes_to_extend option.</p>
<p>Config options:<br>volumes_to_extend (list of integers: None)</p>
<p>Notes:<br>Runs at every boot.</p>
<p><strong>WinRM listener (MAIN)</strong><br>classcloudbaseinit.plugins.windows.winrmlistener.ConfigWinRMListenerPlugin<br>Configures a WinRM HTTPS listener to allow remote management via WinRM or PowerShell.</p>
<p>If winrm_enable_basic_auth is set to True, it enables basic authentication (authentication using username and password) for the WinRM listeners.</p>
<p>If winrm_configure_http_listener is set to True, the WinRM http listener will also be enabled.</p>
<p>Config options:<br>winrm_enable_basic_auth (bool: True)<br>winrm_configure_https_listener (bool: True)<br>winrm_configure_http_listener (bool: False)</p>
<p>Notes:<br>The metadata service can provide the listeners configuration (protocol and certificate thumbprint).</p>
<p>May run at every boot. If the WinRM Windows service does not exist, it will run at the next boot.</p>
<p><strong>WinRM certificate (MAIN)</strong><br>classcloudbaseinit.plugins.windows.winrmcertificateauth.ConfigWinRMCertificateAuthPlugin<br>Enables password-less authentication for remote management via WinRS or PowerShell. Usually uses x509 embedded with UPN certificates.</p>
<p>Config options:<br>username (string: “Admin”)</p>
<p>Notes<br>Requires support in the metadata service. The metadata service must provide the certificate metadata. The admin user password needs to be present, either from the metadata, either as shared data set by running CreateUserPlugin or SetUserPasswordPlugin. The metadata service can provide the username. If the metadata service provides the admin username, it will override the username configuration value.</p>
<p>How to use this feature: <a target="_blank" rel="noopener" href="http://www.cloudbase.it/windows-without-passwords-in-openstack/">http://www.cloudbase.it/windows-without-passwords-in-openstack/</a></p>
<p><strong>Local Scripts execution (MAIN)</strong><br>classcloudbaseinit.plugins.common.localscripts.LocalScriptsPlugin<br>Executes any script (powershell, batch, python etc.) located in the following path indicated by local_scripts_path option.</p>
<p>More details about the supported scripts and content can be found in Tutorial on file execution subject.</p>
<p>Config options:<br>local_scripts_path (string: None)</p>
<p>Notes:<br>May require a system restart.</p>
<p>May run at every boot. It depends on the exit codes of the scripts.</p>
<p><strong>Licensing (MAIN)</strong><br>classcloudbaseinit.plugins.windows.licensing.WindowsLicensingPlugin<br>Activates the Windows instance if the activate_windows option is True. If set_kms_product_key or set_avma_product_key are set, it will use that KMS or AVMA product key in Windows.</p>
<p>If kms_host is set, it will set the provided host as the KMS licensing server.</p>
<p>Config options:<br>activate_windows (bool: False)<br>set_kms_product_key (bool: False)<br>set_avma_product_key (bool: False)<br>kms_host (string: None)<br>log_licensing_info (bool: True)</p>
<p>Notes:<br>The metadata service can provide the KMS host, overriding the configuration option kms_host. The metadata service can provide the avma_product_key, overriding the configuration option set_avma_product_key.</p>
<p><strong>Clock synchronization (PRE_NETWORKING)</strong><br>classcloudbaseinit.plugins.windows.ntpclient.NTPClientPlugin<br>Applies NTP client info based on the DHCP server options, if available. This behavior is enabled only when the ntp_use_dhcp_config option is set to True (which by default is False).</p>
<p>If real_time_clock_utc is set to True, it will set the real time clock to use universal time. If set to False, it will set the real time clock to use the local time.</p>
<p>Config options:<br>ntp_use_dhcp_config (bool: False)<br>real_time_clock_utc (bool: False)<br>ntp_enable_service (bool: True)</p>
<p>Notes:<br>May require a reboot.</p>
<p>May run at every boot.</p>
<p><strong>MTU customization (PRE_METADATA_DISCOVERY)</strong><br>classcloudbaseinit.plugins.common.mtu.MTUPlugin<br>Sets the network interfaces MTU based on the value provided by the DHCP server options, if available and enabled (by default is True). This is particularly useful for cases in which a lower MTU value is required for networking (e.g. OpenStack GRE Neutron Open vSwitch configurations).</p>
<p>Config options:<br>mtu_use_dhcp_config (bool: True)</p>
<p>Notes:<br>Runs at every boot.</p>
<p><strong>User data (MAIN)</strong><br>classcloudbaseinit.plugins.common.userdata.UserDataPlugin<br>Executes custom scripts provided by user data metadata as plain text or compressed with Gzip. More details, examples and possible formats here: Userdata.</p>
<p><strong>Trim Config (MAIN)</strong><br>classcloudbaseinit.plugins.common.trim.TrimConfigPlugin<br>Enables or disables TRIM delete notifications for the underlying storage device.</p>
<p>Config options:<br>trim_enabled (bool: False)</p>
<p><strong>San Policy Config (MAIN)</strong><br>classcloudbaseinit.plugins.windows.sanpolicy.SANPolicyPlugin<br>If not None, the SAN policy is set to the given value of the configuration option san_policy. The possible values are: OnlineAll, OfflineAll or OfflineShared.</p>
<p>Config options:<br>san_policy (string: None)</p>
<p><strong>RDP Settings Config (MAIN)</strong><br>classcloudbaseinit.plugins.windows.rdp.RDPSettingsPlugin<br>Sets the registry key KeepAliveEnable, to enable or disable the RDP keep alive functionality.</p>
<p>Config options:<br>rdp_set_keepalive (bool: False)</p>
<p><strong>RDP Post Certificate Thumbprint (MAIN)</strong><br>classcloudbaseinit.plugins.windows.rdp.RDPPostCertificateThumbprintPlugin<br>Posts the RDP certificate thumbprint to the metadata service endpoint.</p>
<p>Notes:<br>Requires support in the metadata service. The metadata service should expose an HTTP endpoint where the certificate thumbprint can be posted.</p>
<p><strong>Page Files (MAIN)</strong><br>classcloudbaseinit.plugins.windows.pagefiles.PageFilesPlugin<br>Sets custom page files according to the config options.</p>
<p>Config options:<br>page_file_volume_labels (array: [])<br>page_file_volume_mount_points (array: [])</p>
<p>Notes:<br>May require a reboot. If the page file is configured, a reboot is required.</p>
<p>Runs at every boot.</p>
<p><strong>Display Idle Timeout Config (MAIN)</strong><br>classcloudbaseinit.plugins.windows.displayidletimeout.DisplayIdleTimeoutConfigPlugin<br>Sets the idle timeout, in seconds, before powering off the display. Set 0 to leave the display always on.</p>
<p>Config options:<br>display_idle_timeout (int: 0)</p>
<p><strong>Boot Status Policy Config (MAIN)</strong><br>classcloudbaseinit.plugins.windows.bootconfig.BootStatusPolicyPlugin<br>Sets the Windows BCD boot status policy according to the config option. When set, the only possible value for bcd_boot_status_policy is ignoreallfailures.</p>
<p>Config options:<br>bcd_boot_status_policy (string: None)</p>
<p><strong>BCD Config (MAIN)</strong><br>classcloudbaseinit.plugins.windows.bootconfig.BCDConfigPlugin<br>A unique disk ID is needed to avoid disk signature collisions. This plugin resets the boot disk id and enables auto-recovery in the BCD store.</p>
<p>Config options:<br>set_unique_boot_disk_id (bool: False)<br>bcd_enable_auto_recovery (bool: False)</p>
<p><strong>Ephemeral Disk Config (MAIN)</strong><br>classcloudbaseinit.plugins.common.ephemeraldisk.EphemeralDiskPlugin<br>Sets the ephemeral disk data loss warning file. On public clouds like Azure, the ephemeral disk should contain a read only file with data loss warning text, that warns the user to not use the ephemeral disk as a persistent storage disk.</p>
<p>Config options:<br>ephemeral_disk_volume_label (string: None)<br>ephemeral_disk_volume_mount_point (string: None)<br>ephemeral_disk_data_loss_warning_path (string: None)</p>
<p>Notes:<br>Requires support in the metadata service. The metadata service should provide the disk data loss warning text.</p>
<p><strong>Windows Auto Updates (MAIN)</strong><br>classcloudbaseinit.plugins.windows.updates.WindowsAutoUpdatesPlugin<br>Enables automatic Windows updates based on the user configuration or the metadata service information. The metadata service setting takes priority over the configuration option.</p>
<p>Config options:<br>enable_automatic_updates (bool: False)</p>
<p>Notes:<br>If the metadata service provides the information needed to enable the automatic updates, it will override the enable_automatic_updates configuration value.</p>
<p><strong>Server Certificates (MAIN)</strong><br>classcloudbaseinit.plugins.windows.certificates.ServerCertificatesPlugin<br>Imports X509 certificates into the desired store location. The metadata service provides the certificate and key in a PFX archive, their store location and store name.</p>
<p>Notes:<br>Requires support in the metadata service.</p>
<p><strong>Azure Guest Agent (MAIN)</strong><br>classcloudbaseinit.plugins.windows.azureguestagent.AzureGuestAgentPlugin<br>Installs Azure Guest agent, which is required for the Azure cloud platform.</p>
<p>Notes:<br>Requires support in the metadata service. Azure metadata service should provide the agent package provisioning data.</p>
<h3 id="Userdata"><a href="#Userdata" class="headerlink" title="Userdata"></a>Userdata</h3><p><strong>Userdata</strong><br>The userdata is the user custom content exposed to the guest instance by the currently deployed and running cloud infrastructure. Its purpose is to provide additional data for the instance to customize it as much as you need, if the cloud initialization service does support this feature.</p>
<p>Fortunately, cloudbase-init is able to interpret and use this kind of user specific data in multiple ways. In most of the cases, the thing that indicates of what type is the processed data is usually the first line.</p>
<p>Currently supported contents:</p>
<p><strong>PEM certificate</strong><br>—–BEGIN CERTIFICATE—–</p>
<p>This one should start with a PEM specific beginning header, which will be eventually parsed by the configuration drive and web API OpenStack services and used by the WinRM certificate (MAIN) plugin for storing and using it.</p>
<p><strong>Batch</strong><br>rem cmd</p>
<p>The file is executed in a cmd.exe shell (can be changed with the COMSPEC environment variable).</p>
<p><strong>PowerShell</strong></p>
<p>#ps1 or #ps1_sysnative (system native)</p>
<p>#ps1_x86 (Windows On Windows 32bit)</p>
<p>Execute PowerShell scripts using the desired executable. For finding out more about the system nativeness thing, click here.</p>
<p><strong>Bash</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br>A bash shell needs to be installed <span class="hljs-keyword">in</span> the system and available <span class="hljs-keyword">in</span> the PATH <span class="hljs-keyword">in</span> order to use this feature.<br></code></pre></td></tr></table></figure>

<p><strong>Python</strong></p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs d"><span class="hljs-meta">#!/usr/bin/env python</span><br><br>Python <span class="hljs-keyword">is</span> available by <span class="hljs-keyword">default</span> <span class="hljs-keyword">with</span> the build itself, but also it must be <span class="hljs-keyword">in</span> the system PATH.<br></code></pre></td></tr></table></figure>

<p><strong>EC2 format</strong><br>There is no “first line” here, but the content should follow a XML pattern with valid Batch&#x2F;PowerShell script contents under script or powershell enclosing tags like in this example:</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dos">&lt;script&gt;<br><span class="hljs-built_in">set</span> root=<span class="hljs-variable">%SystemDrive%</span><br><span class="hljs-built_in">echo</span> ec2dir&gt;<span class="hljs-variable">%root%</span>\ec2file.txt<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nsis">&lt;powershell&gt;<br><span class="hljs-variable">$root</span> = <span class="hljs-variable">$env</span>:<span class="hljs-params">System</span>Drive<br><span class="hljs-variable">$dname</span> = Get-Content <span class="hljs-string">&quot;<span class="hljs-variable">$root</span>\ec2file.txt&quot;</span><br>New-Item -path <span class="hljs-string">&quot;<span class="hljs-variable">$root</span>\<span class="hljs-variable">$dname</span>&quot;</span> -type <span class="hljs-literal">directory</span><br>&lt;/powershell&gt;<br></code></pre></td></tr></table></figure>
<p>Note<br><a target="_blank" rel="noopener" href="http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/UsingConfig_WinAMI.html">http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/UsingConfig_WinAMI.html</a></p>
<h3 id="Cloud-config"><a href="#Cloud-config" class="headerlink" title="Cloud config"></a>Cloud config</h3><p>#cloud-config</p>
<p>Cloud-config YAML configuration as supported by cloud-init, excluding Linux specific content. The following cloud-config directives are supported:</p>
<p>write_files - Defines a set of files which will be created on the local filesystem. It can be a list of items or only one item, with the following attributes:</p>
<p>path - Absolute path on disk where the content should be written.<br>content - The content which will be written in the given file.<br>permissions - Integer representing file permissions.<br>encoding - The encoding of the data in content. Supported encodings are: b64, base64 for base64-encoded content, gz, gzip for gzip encoded content, gz+b64, gz+base64, gzip+b64, gzip+base64 for base64 encoded gzip content.</p>
<p>Examples:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#cloud-config</span><br><span class="hljs-attr">write_files:</span><br>   <span class="hljs-attr">encoding:</span> <span class="hljs-string">b64</span><br>   <span class="hljs-attr">content:</span> <span class="hljs-string">NDI=</span><br>   <span class="hljs-attr">path:</span> <span class="hljs-string">C:\test</span><br>   <span class="hljs-attr">permissions:</span> <span class="hljs-string">&#x27;0o466&#x27;</span><br><span class="hljs-comment">#cloud-config</span><br><span class="hljs-attr">write_files:</span><br>   <span class="hljs-bullet">-</span>   <span class="hljs-attr">encoding:</span> <span class="hljs-string">b64</span><br>       <span class="hljs-attr">content:</span> <span class="hljs-string">NDI=</span><br>       <span class="hljs-attr">path:</span> <span class="hljs-string">C:\b64</span><br>       <span class="hljs-attr">permissions:</span> <span class="hljs-string">&#x27;0644&#x27;</span><br>   <span class="hljs-bullet">-</span>   <span class="hljs-attr">encoding:</span> <span class="hljs-string">base64</span><br>       <span class="hljs-attr">content:</span> <span class="hljs-string">NDI=</span><br>       <span class="hljs-attr">path:</span> <span class="hljs-string">C:\b64_1</span><br>       <span class="hljs-attr">permissions:</span> <span class="hljs-string">&#x27;0644&#x27;</span><br>   <span class="hljs-bullet">-</span>   <span class="hljs-attr">encoding:</span> <span class="hljs-string">gzip</span><br>       <span class="hljs-attr">content:</span> <span class="hljs-type">!!binary</span> <span class="hljs-string">|</span><br><span class="hljs-string">           H4sIAGUfoFQC/zMxAgCIsCQyAgAAAA==</span><br><span class="hljs-string"></span>       <span class="hljs-attr">path:</span> <span class="hljs-string">C:\gzip</span><br>       <span class="hljs-attr">permissions:</span> <span class="hljs-string">&#x27;0644&#x27;</span><br><span class="hljs-string">set_timezone</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Change</span> <span class="hljs-string">the</span> <span class="hljs-string">underlying</span> <span class="hljs-string">timezone.</span><br></code></pre></td></tr></table></figure>

<p>Example:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#cloud-config</span><br>set_timezone: Asia/Tbilisi<br>set_hostname - Override the already<span class="hljs-built_in"> default </span><span class="hljs-built_in">set</span> hostname value (taken <span class="hljs-keyword">from</span> metadata).<br></code></pre></td></tr></table></figure>
<p>If the hostname is changed, a reboot will be required.</p>
<p>Example:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-meta">#cloud-config</span><br>set_hostname: newhostname<br><span class="hljs-keyword">groups</span> - <span class="hljs-keyword">Create</span> <span class="hljs-keyword">local</span> <span class="hljs-keyword">groups</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">add</span> existing users <span class="hljs-keyword">to</span> those <span class="hljs-keyword">local</span> <span class="hljs-keyword">groups</span>.<br></code></pre></td></tr></table></figure>
<p>The definition of the groups consists of a list in the format:</p>
<p>: [, ]</p>
<p>The list of users can be empty, when creating a group without members.</p>
<p>Example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">groups</span>:<br>  - windows-group: [user1, user2]<br>  - cloud-users<br><span class="hljs-built_in">users</span> - Create and configure <span class="hljs-built_in">local</span> <span class="hljs-built_in">users</span>.<br></code></pre></td></tr></table></figure>
<p>The users are defined as a list. Each element from the list represents a user. Each user can have the the following attributes defined:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-type">name</span> - The username (required string).<br>gecos - the <span class="hljs-keyword">user</span> description.<br>primary_group - the <span class="hljs-keyword">user</span>’s <span class="hljs-keyword">primary</span> <span class="hljs-keyword">group</span>.<br><span class="hljs-keyword">groups</span> - the <span class="hljs-keyword">user</span>’s <span class="hljs-keyword">groups</span>. <span class="hljs-keyword">On</span> Windows, primary_group <span class="hljs-keyword">and</span> <span class="hljs-keyword">groups</span> are concatenated.<br>passwd - the <span class="hljs-keyword">user</span>’s <span class="hljs-keyword">password</span>. <span class="hljs-keyword">On</span> Linux, the <span class="hljs-keyword">password</span> <span class="hljs-keyword">is</span> a hashed string, whereas <span class="hljs-keyword">on</span> Windows the <span class="hljs-keyword">password</span> <span class="hljs-keyword">is</span> a plaintext string. <span class="hljs-keyword">If</span> the <span class="hljs-keyword">password</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined, a random <span class="hljs-keyword">password</span> will be <span class="hljs-keyword">set</span>.<br>inactive - <span class="hljs-type">boolean</span> <span class="hljs-keyword">value</span>, defaults <span class="hljs-keyword">to</span> <span class="hljs-keyword">False</span>. <span class="hljs-keyword">If</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">True</span>, the <span class="hljs-keyword">user</span> will be disabled.<br>expiredate - a string <span class="hljs-keyword">in</span> the <span class="hljs-keyword">format</span> <span class="hljs-comment">--. Example: 2020-10-01.</span><br>ssh_authorized_keys - a list <span class="hljs-keyword">of</span> SSH <span class="hljs-built_in">public</span> keys, that will be <span class="hljs-keyword">set</span> <span class="hljs-keyword">in</span> ~/.ssh/authorized_keys.<br></code></pre></td></tr></table></figure>
<p>Example:</p>
<figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">users</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span><br>    <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Admin</span><br>  <span class="hljs-bullet">-</span><br>    <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">brian</span><br>    <span class="hljs-attribute">gecos</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&#x27;Brian Cohen&#x27;</span><br>    <span class="hljs-attribute">primary_group</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Users</span><br>    <span class="hljs-attribute">groups</span><span class="hljs-punctuation">:</span> <span class="hljs-string">cloud-users</span><br>    <span class="hljs-attribute">passwd</span><span class="hljs-punctuation">:</span> <span class="hljs-string">StrongPassw0rd</span><br>    <span class="hljs-attribute">inactive</span><span class="hljs-punctuation">:</span> <span class="hljs-string">False</span><br>    <span class="hljs-attribute">expiredate</span><span class="hljs-punctuation">:</span> <span class="hljs-string">2020-10-01</span><br>    <span class="hljs-attribute">ssh_authorized_keys</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ssh-rsa AAAB...byV</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ssh-rsa AAAB...ctV</span><br><span class="hljs-attribute">ntp - Set NTP servers. The definition is a dict with the following attributes</span><span class="hljs-punctuation">:</span><br></code></pre></td></tr></table></figure>
<p>enabled - Boolean value, defaults to True, to enable or disable the NTP config.<br>servers - A list of NTP servers.<br>pools - A list of NTP pools.</p>
<p>The servers and pools are aggregated, servers being the first ones in the list. On Windows, there is no difference between an NTP pool or server.</p>
<p>Example:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-id">#cloud-config</span><br><span class="hljs-selector-tag">ntp</span>:<br>  <span class="hljs-selector-tag">enabled</span>: <span class="hljs-selector-tag">True</span><br>  <span class="hljs-selector-tag">servers</span>: <span class="hljs-selector-attr">[<span class="hljs-string">&#x27;my.ntp.server.local&#x27;</span>, <span class="hljs-string">&#x27;192.168.23.2&#x27;</span>]</span><br>  <span class="hljs-selector-tag">pools</span>: <span class="hljs-selector-attr">[<span class="hljs-string">&#x27;0.company.pool.ntp.org&#x27;</span>, <span class="hljs-string">&#x27;1.company.pool.ntp.org&#x27;</span>]</span><br><span class="hljs-selector-tag">runcmd</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Directive</span> <span class="hljs-selector-tag">that</span> <span class="hljs-selector-tag">can</span> <span class="hljs-selector-tag">contain</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">list</span> <span class="hljs-selector-tag">of</span> <span class="hljs-selector-tag">commands</span> <span class="hljs-selector-tag">that</span> <span class="hljs-selector-tag">will</span> <span class="hljs-selector-tag">be</span> <span class="hljs-selector-tag">executed</span>, <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">the</span> <span class="hljs-selector-tag">order</span> <span class="hljs-selector-tag">of</span> <span class="hljs-selector-tag">their</span> <span class="hljs-selector-tag">definition</span>.<br></code></pre></td></tr></table></figure>
<p>A command can be defined as a string or as a list of strings, the first one being the executable path.</p>
<p>On Windows, the commands are aggregated into a file and executed with cmd.exe. The userdata exit codes can be used to request a reboot: File execution.</p>
<p>Example:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-comment">#cloud-config</span><br>runcmd:<br>  - <span class="hljs-string">&#x27;dir C:\\&#x27;</span><br>  - [<span class="hljs-string">&#x27;echo&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>]<br>The cloud-config directives are executed <span class="hljs-keyword">by</span> default <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> following order: write_files, set_timezone, set_hostname, ntp, groups, users, runcmd. Use config option cloud_config_plugins <span class="hljs-built_in">to</span> <span class="hljs-built_in">filter</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">to</span> change <span class="hljs-keyword">the</span> order <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> cloud config plugins.<br></code></pre></td></tr></table></figure>
<p>The execution of set_hostname or runcmd can request a reboot if needed. The reboot is performed at the end of the cloud-config execution (after all the directives have been executed).</p>
<p>Multi-part content<br>MIME multi-part user data is supported. The content will be handled based on the content type.</p>
<p>text&#x2F;x-shellscript - Any script to be executed: PowerShell, Batch, Bash or Python.</p>
<p>text&#x2F;part-handler - A script that can manage other content type parts. This is used in particular by Heat &#x2F; CFN templates, although Linux specific.</p>
<p>text&#x2F;x-cfninitdata - Heat &#x2F; CFN content. Written to the path provided by heat_config_dir option which defaults to “C:\cfn”. (examples of Heat Windows templates)</p>
<p>Sysnativeness<br>When deciding which path to use for system executable files…</p>
<p>On 32bit OSes, the return value will be the System32 directory, which contains 32bit programs. On 64bit OSes, the return value may be different, depending on the Python bits and the sysnative parameter. If the Python interpreter is 32bit, the return value will be System32 (containing 32bit programs) if sysnative is set to False and Sysnative otherwise. But if the Python interpreter is 64bit and sysnative is False, the return value will be SysWOW64 and System32 for a True value of sysnative.</p>
<p>Why this behavior and what is the purpose of sysnative parameter?</p>
<p>On a 32bit OS the things are clear, there is one System32 directory containing 32bit applications and that’s all. On a 64bit OS, there’s a System32 directory containing 64bit applications and a compatibility one named SysWOW64 (WindowsOnWindows) containing the 32bit version of them. Depending on the Python interpreter’s bits, the sysnative flag will try to bring the appropriate version of the system directory, more exactly, the physical System32 or SysWOW64 found on disk. On a WOW case (32bit interpreter on 64bit OS), a return value of System32 will point to the physical SysWOW64 directory and a return value of Sysnative, which is consolidated by the existence of this alias, will point to the real physical System32 directory found on disk. If the OS is still 64bit and there is no WOW case (that means the interpreter is 64bit), the system native concept is out of discussion and each return value will point to the physical location it intends to.</p>
<p>On a 32bit OS the sysnative parameter has no meaning, but on a 64bit one, based on its value, it will provide a real&#x2F;alias path pointing to system native applications if set to True (64bit programs) and to system compatibility applications if set to False (32bit programs). Its purpose is to provide the correct system paths by taking into account the Python interpreter bits too, because on a 32bit interpreter version, System32 is not the same with the System32 on a 64bit interpreter. Also, using a 64bit interpreter, the Sysnative alias will not work, but the sysnative parameter will take care to return SysWOW64 if you explicitly want 32bit applications, by setting it to False.</p>
<p>Configuration options reference<br>The following is an overview of all available configuration options in cloudbase-init.</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">DEFAULT</span><br><span class="hljs-keyword">debug</span><br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Mutable<br>This <span class="hljs-keyword">option</span> can be changed <span class="hljs-keyword">without</span> restarting.<br><br><span class="hljs-keyword">If</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">true</span>, the logging <span class="hljs-keyword">level</span> will be <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">DEBUG</span> <span class="hljs-keyword">instead</span> <span class="hljs-keyword">of</span> the <span class="hljs-keyword">default</span> <span class="hljs-keyword">INFO</span> <span class="hljs-keyword">level</span>.<br><br>log_config_append<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>Mutable<br>This <span class="hljs-keyword">option</span> can be changed <span class="hljs-keyword">without</span> restarting.<br><br>The <span class="hljs-type">name</span> <span class="hljs-keyword">of</span> a logging <span class="hljs-keyword">configuration</span> file. This file <span class="hljs-keyword">is</span> appended <span class="hljs-keyword">to</span> <span class="hljs-keyword">any</span> existing logging <span class="hljs-keyword">configuration</span> files. <span class="hljs-keyword">For</span> details about logging <span class="hljs-keyword">configuration</span> files, see the Python logging module documentation. Note that <span class="hljs-keyword">when</span> logging <span class="hljs-keyword">configuration</span> files are used <span class="hljs-keyword">then</span> <span class="hljs-keyword">all</span> logging <span class="hljs-keyword">configuration</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">in</span> the <span class="hljs-keyword">configuration</span> file <span class="hljs-keyword">and</span> other logging <span class="hljs-keyword">configuration</span> <span class="hljs-keyword">options</span> are ignored (<span class="hljs-keyword">for</span> example, <span class="hljs-keyword">log</span>-<span class="hljs-type">date</span>-<span class="hljs-keyword">format</span>).<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br><span class="hljs-keyword">log</span>-config<br><br><span class="hljs-keyword">DEFAULT</span><br><br>log_config<br><br>log_date_format<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>%Y-%m-%d %H:%M:%S<br><br>Defines the <span class="hljs-keyword">format</span> string <span class="hljs-keyword">for</span> %(asctime)s <span class="hljs-keyword">in</span> <span class="hljs-keyword">log</span> records. <span class="hljs-keyword">Default</span>: the <span class="hljs-keyword">value</span> above . This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>log_file<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>(Optional) <span class="hljs-type">Name</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">log</span> file <span class="hljs-keyword">to</span> send logging output <span class="hljs-keyword">to</span>. <span class="hljs-keyword">If</span> <span class="hljs-keyword">no</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>, logging will go <span class="hljs-keyword">to</span> stderr <span class="hljs-keyword">as</span> defined <span class="hljs-keyword">by</span> use_stderr. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>logfile<br><br>log_dir<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>(Optional) The base directory used <span class="hljs-keyword">for</span> relative log_file paths. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>logdir<br><br>watch_log_file<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Uses logging <span class="hljs-keyword">handler</span> designed <span class="hljs-keyword">to</span> watch file <span class="hljs-keyword">system</span>. <span class="hljs-keyword">When</span> <span class="hljs-keyword">log</span> file <span class="hljs-keyword">is</span> moved <span class="hljs-keyword">or</span> removed this <span class="hljs-keyword">handler</span> will <span class="hljs-keyword">open</span> a <span class="hljs-built_in">new</span> <span class="hljs-keyword">log</span> file <span class="hljs-keyword">with</span> specified <span class="hljs-type">path</span> instantaneously. It makes sense <span class="hljs-keyword">only</span> <span class="hljs-keyword">if</span> log_file <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> specified <span class="hljs-keyword">and</span> Linux platform <span class="hljs-keyword">is</span> used. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>use_syslog<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Use syslog <span class="hljs-keyword">for</span> logging. Existing syslog <span class="hljs-keyword">format</span> <span class="hljs-keyword">is</span> DEPRECATED <span class="hljs-keyword">and</span> will be changed later <span class="hljs-keyword">to</span> honor RFC5424. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>use_journal<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br><span class="hljs-keyword">Enable</span> journald <span class="hljs-keyword">for</span> logging. <span class="hljs-keyword">If</span> running <span class="hljs-keyword">in</span> a systemd environment you may wish <span class="hljs-keyword">to</span> <span class="hljs-keyword">enable</span> journal support. Doing so will use the journal native protocol which includes structured metadata <span class="hljs-keyword">in</span> addition <span class="hljs-keyword">to</span> <span class="hljs-keyword">log</span> messages.This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>syslog_log_facility<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>LOG_USER<br><br>Syslog facility <span class="hljs-keyword">to</span> receive <span class="hljs-keyword">log</span> lines. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>use_json<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Use <span class="hljs-type">JSON</span> formatting <span class="hljs-keyword">for</span> logging. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>use_stderr<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br><span class="hljs-keyword">Log</span> output <span class="hljs-keyword">to</span> standard error. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>use_eventlog<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br><span class="hljs-keyword">Log</span> output <span class="hljs-keyword">to</span> Windows Event <span class="hljs-keyword">Log</span>.<br><br>log_rotate_interval<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">1</span><br><br>The amount <span class="hljs-keyword">of</span> <span class="hljs-type">time</span> <span class="hljs-keyword">before</span> the <span class="hljs-keyword">log</span> files are rotated. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored unless log_rotation_type <span class="hljs-keyword">is</span> setto “<span class="hljs-type">interval</span>”.<br><br>log_rotate_interval_type<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>days<br><br><span class="hljs-keyword">Valid</span> <span class="hljs-keyword">Values</span><br>Seconds, Minutes, Hours, Days, Weekday, Midnight<br><br>Rotation <span class="hljs-type">interval</span> <span class="hljs-keyword">type</span>. The <span class="hljs-type">time</span> <span class="hljs-keyword">of</span> the last file change (<span class="hljs-keyword">or</span> the <span class="hljs-type">time</span> <span class="hljs-keyword">when</span> the service was started) <span class="hljs-keyword">is</span> used <span class="hljs-keyword">when</span> scheduling the next rotation.<br><br>max_logfile_count<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">30</span><br><br>Maximum number <span class="hljs-keyword">of</span> rotated <span class="hljs-keyword">log</span> files.<br><br>max_logfile_size_mb<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">200</span><br><br><span class="hljs-keyword">Log</span> file maximum size <span class="hljs-keyword">in</span> MB. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> “log_rotation_type” <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> “size”.<br><br>log_rotation_type<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">none</span><br><br><span class="hljs-keyword">Valid</span> <span class="hljs-keyword">Values</span><br><span class="hljs-type">interval</span>, size, <span class="hljs-keyword">none</span><br><br><span class="hljs-keyword">Log</span> rotation <span class="hljs-keyword">type</span>.<br><br>Possible <span class="hljs-keyword">values</span><br><br><span class="hljs-type">interval</span><br>Rotate logs at predefined <span class="hljs-type">time</span> intervals.<br><br>size<br>Rotate logs once they reach a predefined size.<br><br><span class="hljs-keyword">none</span><br><span class="hljs-keyword">Do</span> <span class="hljs-keyword">not</span> rotate <span class="hljs-keyword">log</span> files.<br><br>logging_context_format_string<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>%(asctime)s.%(msecs)<span class="hljs-number">03</span>d %(process)d %(levelname)s %(<span class="hljs-type">name</span>)s [%(request_id)s %(user_identity)s] %(instance)s%(message)s<br><br><span class="hljs-keyword">Format</span> string <span class="hljs-keyword">to</span> use <span class="hljs-keyword">for</span> <span class="hljs-keyword">log</span> messages <span class="hljs-keyword">with</span> context. Used <span class="hljs-keyword">by</span> oslo_log.formatters.ContextFormatter<br><br>logging_default_format_string<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>%(asctime)s.%(msecs)<span class="hljs-number">03</span>d %(process)d %(levelname)s %(<span class="hljs-type">name</span>)s [-] %(instance)s%(message)s<br><br><span class="hljs-keyword">Format</span> string <span class="hljs-keyword">to</span> use <span class="hljs-keyword">for</span> <span class="hljs-keyword">log</span> messages <span class="hljs-keyword">when</span> context <span class="hljs-keyword">is</span> undefined. Used <span class="hljs-keyword">by</span> oslo_log.formatters.ContextFormatter<br><br>logging_debug_format_suffix<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>%(funcName)s %(pathname)s:%(lineno)d<br><br>Additional data <span class="hljs-keyword">to</span> append <span class="hljs-keyword">to</span> <span class="hljs-keyword">log</span> message <span class="hljs-keyword">when</span> logging <span class="hljs-keyword">level</span> <span class="hljs-keyword">for</span> the message <span class="hljs-keyword">is</span> <span class="hljs-keyword">DEBUG</span>. Used <span class="hljs-keyword">by</span> oslo_log.formatters.ContextFormatter<br><br>logging_exception_prefix<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>%(asctime)s.%(msecs)<span class="hljs-number">03</span>d %(process)d ERROR %(<span class="hljs-type">name</span>)s %(instance)s<br><br>Prefix <span class="hljs-keyword">each</span> <span class="hljs-type">line</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">exception</span> output <span class="hljs-keyword">with</span> this <span class="hljs-keyword">format</span>. Used <span class="hljs-keyword">by</span> oslo_log.formatters.ContextFormatter<br><br>logging_user_identity_format<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>%(<span class="hljs-keyword">user</span>)s %(tenant)s %(<span class="hljs-keyword">domain</span>)s %(user_domain)s %(project_domain)s<br><br>Defines the <span class="hljs-keyword">format</span> string <span class="hljs-keyword">for</span> %(user_identity)s that <span class="hljs-keyword">is</span> used <span class="hljs-keyword">in</span> logging_context_format_string. Used <span class="hljs-keyword">by</span> oslo_log.formatters.ContextFormatter<br><br>default_log_levels<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[‘amqp=WARN’, ‘amqplib=WARN’, ‘boto=WARN’, ‘qpid=WARN’, ‘sqlalchemy=WARN’, ‘suds=<span class="hljs-keyword">INFO</span>’, ‘oslo.messaging=<span class="hljs-keyword">INFO</span>’, ‘oslo_messaging=<span class="hljs-keyword">INFO</span>’, ‘iso8601=WARN’, ‘requests.packages.urllib3.connectionpool=WARN’, ‘urllib3.connectionpool=WARN’, ‘websocket=WARN’, ‘requests.packages.urllib3.util.retry=WARN’, ‘urllib3.util.retry=WARN’, ‘keystonemiddleware=WARN’, ‘routes.middleware=WARN’, ‘stevedore=WARN’, ‘taskflow=WARN’, ‘keystoneauth=WARN’, ‘oslo.cache=<span class="hljs-keyword">INFO</span>’, ‘oslo_policy=<span class="hljs-keyword">INFO</span>’, ‘dogpile.core.dogpile=<span class="hljs-keyword">INFO</span>’]<br><br>List <span class="hljs-keyword">of</span> package logging levels <span class="hljs-keyword">in</span> logger=<span class="hljs-keyword">LEVEL</span> pairs. This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> ignored <span class="hljs-keyword">if</span> log_config_append <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span>.<br><br>publish_errors<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Enables <span class="hljs-keyword">or</span> disables <span class="hljs-keyword">publication</span> <span class="hljs-keyword">of</span> error events.<br><br>instance_format<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>“[instance: %(<span class="hljs-type">uuid</span>)s] “<br><br>The <span class="hljs-keyword">format</span> <span class="hljs-keyword">for</span> an instance that <span class="hljs-keyword">is</span> passed <span class="hljs-keyword">with</span> the <span class="hljs-keyword">log</span> message.<br><br>instance_uuid_format<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>“[instance: %(<span class="hljs-type">uuid</span>)s] “<br><br>The <span class="hljs-keyword">format</span> <span class="hljs-keyword">for</span> an instance <span class="hljs-type">UUID</span> that <span class="hljs-keyword">is</span> passed <span class="hljs-keyword">with</span> the <span class="hljs-keyword">log</span> message.<br><br>rate_limit_interval<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">0</span><br><br><span class="hljs-type">Interval</span>, number <span class="hljs-keyword">of</span> seconds, <span class="hljs-keyword">of</span> <span class="hljs-keyword">log</span> rate limiting.<br><br>rate_limit_burst<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">0</span><br><br>Maximum number <span class="hljs-keyword">of</span> <span class="hljs-keyword">logged</span> messages per rate_limit_interval.<br><br>rate_limit_except_level<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>CRITICAL<br><br><span class="hljs-keyword">Log</span> <span class="hljs-keyword">level</span> <span class="hljs-type">name</span> used <span class="hljs-keyword">by</span> rate limiting: CRITICAL, ERROR, <span class="hljs-keyword">INFO</span>, <span class="hljs-built_in">WARNING</span>, <span class="hljs-keyword">DEBUG</span> <span class="hljs-keyword">or</span> empty string. Logs <span class="hljs-keyword">with</span> <span class="hljs-keyword">level</span> greater <span class="hljs-keyword">or</span> equal <span class="hljs-keyword">to</span> rate_limit_except_level are <span class="hljs-keyword">not</span> filtered. An empty string means that <span class="hljs-keyword">all</span> levels are filtered.<br><br>fatal_deprecations<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Enables <span class="hljs-keyword">or</span> disables fatal status <span class="hljs-keyword">of</span> deprecations.<br><br>allow_reboot<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Allows OS reboots requested <span class="hljs-keyword">by</span> plugins<br><br>stop_service_on_exit<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br><span class="hljs-keyword">In</span> <span class="hljs-keyword">case</span> <span class="hljs-keyword">of</span> execution <span class="hljs-keyword">as</span> a service, specifies <span class="hljs-keyword">if</span> the service must be gracefully stopped <span class="hljs-keyword">before</span> exiting<br><br>check_latest_version<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br><span class="hljs-keyword">Check</span> <span class="hljs-keyword">if</span> there <span class="hljs-keyword">is</span> a newer <span class="hljs-keyword">version</span> <span class="hljs-keyword">of</span> cloudbase-init available. <span class="hljs-keyword">If</span> this <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> activated, a <span class="hljs-keyword">log</span> message will be emitted <span class="hljs-keyword">if</span> there <span class="hljs-keyword">is</span> a newer <span class="hljs-keyword">version</span> available.<br><br>retry_count<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">5</span><br><br>Max. number <span class="hljs-keyword">of</span> attempts <span class="hljs-keyword">for</span> fetching metadata <span class="hljs-keyword">in</span> <span class="hljs-keyword">case</span> <span class="hljs-keyword">of</span> transient errors<br><br>retry_count_interval<br><span class="hljs-keyword">Type</span><br>floating <span class="hljs-type">point</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">4</span><br><br><span class="hljs-type">Interval</span> <span class="hljs-keyword">between</span> attempts <span class="hljs-keyword">in</span> <span class="hljs-keyword">case</span> <span class="hljs-keyword">of</span> transient errors, expressed <span class="hljs-keyword">in</span> seconds<br><br>mtools_path<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br><span class="hljs-type">Path</span> <span class="hljs-keyword">to</span> “mtools” program suite, used <span class="hljs-keyword">for</span> interacting <span class="hljs-keyword">with</span> VFAT filesystems<br><br>bsdtar_path<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>bsdtar.exe<br><br><span class="hljs-type">Path</span> <span class="hljs-keyword">to</span> “bsdtar”, used <span class="hljs-keyword">to</span> extract ISO ConfigDrive files<br><br>netbios_host_name_compatibility<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Truncates the hostname <span class="hljs-keyword">to</span> <span class="hljs-number">15</span> characters <span class="hljs-keyword">for</span> Netbios compatibility<br><br>logging_serial_port_settings<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br><span class="hljs-type">Serial</span> port logging settings. <span class="hljs-keyword">Format</span>: “port,baudrate,parity,bytesize”, e.g.: “COM1,<span class="hljs-number">115200</span>,N,<span class="hljs-number">8</span>”. <span class="hljs-keyword">Set</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">None</span> (<span class="hljs-keyword">default</span>) <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span>.<br><br>activate_windows<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Activates Windows automatically<br><br>set_kms_product_key<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Sets the KMS product key <span class="hljs-keyword">for</span> this operating <span class="hljs-keyword">system</span><br><br>set_avma_product_key<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Sets the AVMA product key <span class="hljs-keyword">for</span> this operating <span class="hljs-keyword">system</span><br><br>kms_host<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>The KMS host address <span class="hljs-keyword">in</span> form [:], e.g: “kmshost:<span class="hljs-number">1688</span>”<br><br>log_licensing_info<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Logs the operating <span class="hljs-keyword">system</span> licensing information<br><br>winrm_enable_basic_auth<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Enables basic authentication <span class="hljs-keyword">for</span> the WinRM HTTPS listener<br><br>winrm_configure_http_listener<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Configures the WinRM HTTP listener<br><br>winrm_configure_https_listener<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Configures the WinRM HTTPS listener<br><br>volumes_to_extend<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br><br>List <span class="hljs-keyword">of</span> volumes that need <span class="hljs-keyword">to</span> be extended <span class="hljs-keyword">if</span> contiguous space <span class="hljs-keyword">is</span> available <span class="hljs-keyword">on</span> the disk. <span class="hljs-keyword">By</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">all</span> the available volumes can be extended. Volumes must be specified <span class="hljs-keyword">using</span> a comma separated list <span class="hljs-keyword">of</span> volume indexes, e.g.: “<span class="hljs-number">1</span>,<span class="hljs-number">2</span>”<br><br>san_policy<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br><span class="hljs-keyword">Valid</span> <span class="hljs-keyword">Values</span><br>OnlineAll, OfflineAll, OfflineShared<br><br><span class="hljs-keyword">If</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">None</span>, the SAN <span class="hljs-keyword">policy</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> the given <span class="hljs-keyword">value</span><br><br>local_scripts_path<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br><span class="hljs-type">Path</span> <span class="hljs-keyword">location</span> containing scripts <span class="hljs-keyword">to</span> be executed <span class="hljs-keyword">when</span> the plugin runs<br><br>mtu_use_dhcp_config<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Configures the network interfaces MTU based <span class="hljs-keyword">on</span> the <span class="hljs-keyword">values</span> provided via DHCP<br><br>username<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">Admin</span><br><br><span class="hljs-keyword">User</span> <span class="hljs-keyword">to</span> be added <span class="hljs-keyword">to</span> the <span class="hljs-keyword">system</span> <span class="hljs-keyword">or</span> updated <span class="hljs-keyword">if</span> already existing<br><br><span class="hljs-keyword">groups</span><br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[‘Administrators’]<br><br>List <span class="hljs-keyword">of</span> <span class="hljs-keyword">local</span> <span class="hljs-keyword">groups</span> <span class="hljs-keyword">to</span> which the <span class="hljs-keyword">user</span> specified <span class="hljs-keyword">in</span> “username” will be added<br><br>rename_admin_user<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Renames the builtin <span class="hljs-keyword">admin</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">instead</span> <span class="hljs-keyword">of</span> creating a <span class="hljs-built_in">new</span> <span class="hljs-keyword">user</span><br><br>heat_config_dir<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>C:\cfn<br><br>The directory <span class="hljs-keyword">where</span> the Heat <span class="hljs-keyword">configuration</span> files must be saved<br><br>ntp_enable_service<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Enables the NTP client service<br><br>ntp_use_dhcp_config<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Configures NTP client <span class="hljs-type">time</span> synchronization <span class="hljs-keyword">using</span> the NTP servers provided via DHCP<br><br>real_time_clock_utc<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Sets the <span class="hljs-type">real</span> <span class="hljs-type">time</span> clock <span class="hljs-keyword">to</span> use universal <span class="hljs-type">time</span> (<span class="hljs-keyword">True</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">local</span> <span class="hljs-type">time</span> (<span class="hljs-keyword">False</span>)<br><br>inject_user_password<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br><span class="hljs-keyword">Set</span> the <span class="hljs-keyword">password</span> provided <span class="hljs-keyword">in</span> the <span class="hljs-keyword">configuration</span>. <span class="hljs-keyword">If</span> <span class="hljs-keyword">False</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">no</span> <span class="hljs-keyword">password</span> <span class="hljs-keyword">is</span> provided, a random one will be <span class="hljs-keyword">set</span><br><br>first_logon_behaviour<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>clear_text_injected_only<br><br><span class="hljs-keyword">Valid</span> <span class="hljs-keyword">Values</span><br>clear_text_injected_only, <span class="hljs-keyword">no</span>, <span class="hljs-keyword">always</span><br><br>Control the behaviour <span class="hljs-keyword">of</span> what happens at next logon. <span class="hljs-keyword">If</span> this <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">always</span>, <span class="hljs-keyword">then</span> the <span class="hljs-keyword">user</span> will be forced <span class="hljs-keyword">to</span> change the <span class="hljs-keyword">password</span> at next logon. <span class="hljs-keyword">If</span> it <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> clear_text_injected_only, <span class="hljs-keyword">then</span> the <span class="hljs-keyword">user</span> will have <span class="hljs-keyword">to</span> change the <span class="hljs-keyword">password</span> <span class="hljs-keyword">only</span> <span class="hljs-keyword">if</span> the <span class="hljs-keyword">password</span> <span class="hljs-keyword">is</span> a clear <span class="hljs-type">text</span> <span class="hljs-keyword">password</span>, coming <span class="hljs-keyword">from</span> the metadata. The last <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">no</span>, <span class="hljs-keyword">when</span> the <span class="hljs-keyword">user</span> <span class="hljs-keyword">is</span> never forced <span class="hljs-keyword">to</span> change the <span class="hljs-keyword">password</span>.<br><br>metadata_services<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[‘cloudbaseinit.metadata.services.httpservice.HttpService’, ‘cloudbaseinit.metadata.services.configdrive.ConfigDriveService’, ‘cloudbaseinit.metadata.services.ec2service.EC2Service’, ‘cloudbaseinit.metadata.services.maasservice.MaaSHttpService’, ‘cloudbaseinit.metadata.services.cloudstack.CloudStack’, ‘cloudbaseinit.metadata.services.opennebulaservice.OpenNebulaService’]<br><br>List <span class="hljs-keyword">of</span> enabled metadata service classes, <span class="hljs-keyword">to</span> be tested <span class="hljs-keyword">for</span> availability <span class="hljs-keyword">in</span> the provided <span class="hljs-keyword">order</span>. The first available service will be used <span class="hljs-keyword">to</span> retrieve metadata<br><br>plugins<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[‘cloudbaseinit.plugins.common.mtu.MTUPlugin’, ‘cloudbaseinit.plugins.windows.ntpclient.NTPClientPlugin’, ‘cloudbaseinit.plugins.common.sethostname.SetHostNamePlugin’, ‘cloudbaseinit.plugins.windows.createuser.CreateUserPlugin’, ‘cloudbaseinit.plugins.common.networkconfig.NetworkConfigPlugin’, ‘cloudbaseinit.plugins.windows.licensing.WindowsLicensingPlugin’, ‘cloudbaseinit.plugins.common.sshpublickeys.SetUserSSHPublicKeysPlugin’, ‘cloudbaseinit.plugins.windows.extendvolumes.ExtendVolumesPlugin’, ‘cloudbaseinit.plugins.common.userdata.UserDataPlugin’, ‘cloudbaseinit.plugins.common.setuserpassword.SetUserPasswordPlugin’, ‘cloudbaseinit.plugins.windows.winrmlistener.ConfigWinRMListenerPlugin’, ‘cloudbaseinit.plugins.windows.winrmcertificateauth.ConfigWinRMCertificateAuthPlugin’, ‘cloudbaseinit.plugins.common.localscripts.LocalScriptsPlugin’]<br><br>List <span class="hljs-keyword">of</span> enabled plugin classes, <span class="hljs-keyword">to</span> be executed <span class="hljs-keyword">in</span> the provided <span class="hljs-keyword">order</span><br><br>user_data_plugins<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[‘cloudbaseinit.plugins.common.userdataplugins.parthandler.PartHandlerPlugin’, ‘cloudbaseinit.plugins.common.userdataplugins.cloudconfig.CloudConfigPlugin’, ‘cloudbaseinit.plugins.common.userdataplugins.cloudboothook.CloudBootHookPlugin’, ‘cloudbaseinit.plugins.common.userdataplugins.shellscript.ShellScriptPlugin’, ‘cloudbaseinit.plugins.common.userdataplugins.multipartmixed.MultipartMixedPlugin’, ‘cloudbaseinit.plugins.common.userdataplugins.heat.HeatPlugin’]<br><br>List <span class="hljs-keyword">of</span> enabled userdata content plugins<br><br>cloud_config_plugins<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[]<br><br>List which contains the <span class="hljs-type">name</span> <span class="hljs-keyword">of</span> the cloud config plugins ordered <span class="hljs-keyword">by</span> priority.<br><br>rdp_set_keepalive<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Sets the RDP KeepAlive <span class="hljs-keyword">policy</span><br><br>bcd_boot_status_policy<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br><span class="hljs-keyword">Valid</span> <span class="hljs-keyword">Values</span><br>ignoreallfailures<br><br>Sets the Windows BCD boot status <span class="hljs-keyword">policy</span><br><br>bcd_enable_auto_recovery<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Enables <span class="hljs-keyword">or</span> disables the BCD auto recovery<br><br>set_unique_boot_disk_id<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Sets a <span class="hljs-built_in">new</span> random <span class="hljs-keyword">unique</span> id <span class="hljs-keyword">on</span> the boot disk <span class="hljs-keyword">to</span> avoid collisions<br><br>display_idle_timeout<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">0</span><br><br>The idle timeout, <span class="hljs-keyword">in</span> seconds, <span class="hljs-keyword">before</span> powering <span class="hljs-keyword">off</span> the display. <span class="hljs-keyword">Set</span> <span class="hljs-number">0</span> <span class="hljs-keyword">to</span> leave the display <span class="hljs-keyword">always</span> <span class="hljs-keyword">on</span><br><br>page_file_volume_labels<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[]<br><br>Labels <span class="hljs-keyword">of</span> volumes <span class="hljs-keyword">on</span> which a Windows page file needs <span class="hljs-keyword">to</span> be created. E.g.: “<span class="hljs-keyword">Temporary</span> <span class="hljs-keyword">Storage</span>”<br><br>page_file_volume_mount_points<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[]<br><br>Volume mount points <span class="hljs-keyword">on</span> which a Windows page file needs <span class="hljs-keyword">to</span> be created. E.g.: “?GLOBALROOTdeviceHarddisk1Partition1”<br><br>trim_enabled<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Enables <span class="hljs-keyword">or</span> disables TRIM <span class="hljs-keyword">delete</span> notifications <span class="hljs-keyword">for</span> the underlying <span class="hljs-keyword">storage</span> device.<br><br>process_userdata<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Processes the userdata content based <span class="hljs-keyword">on</span> the <span class="hljs-keyword">type</span>, e.g. executing a PowerShell script<br><br>userdata_save_path<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>Copies the userdata <span class="hljs-keyword">to</span> the given file <span class="hljs-type">path</span>. The <span class="hljs-type">path</span> can <span class="hljs-keyword">include</span> environment variables that will be expanded, e.g. “%SYSTEMDRIVE%CloudbaseInitUserData.bin”<br><br>enable_automatic_updates<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><br><span class="hljs-keyword">If</span> <span class="hljs-keyword">set</span>, enables <span class="hljs-keyword">or</span> disables automatic operating <span class="hljs-keyword">system</span> updates.<br><br>metadata_report_provisioning_started<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Reports <span class="hljs-keyword">to</span> the metadata service that provisioning has started<br><br>metadata_report_provisioning_completed<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Reports <span class="hljs-keyword">to</span> the metadata service that provisioning completed successfully <span class="hljs-keyword">or</span> failed<br><br>ephemeral_disk_volume_label<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>Ephemeral disk volume label, e.g.: “<span class="hljs-keyword">Temporary</span> <span class="hljs-keyword">Storage</span>”<br><br>ephemeral_disk_volume_mount_point<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>Ephemeral disk volume mount <span class="hljs-type">point</span>, e.g.:”?GLOBALROOTdeviceHarddisk1Partition1”<br><br>ephemeral_disk_data_loss_warning_path<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>Ephemeral disk data loss <span class="hljs-built_in">warning</span> <span class="hljs-type">path</span>, relative <span class="hljs-keyword">to</span> the ephemeral disk volume <span class="hljs-type">path</span>. E.g.: DATALOSS_WARNING_README.txt<br><br>user_password_length<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">20</span><br><br>The length <span class="hljs-keyword">of</span> the <span class="hljs-keyword">generated</span> <span class="hljs-keyword">password</span> <span class="hljs-keyword">for</span> the <span class="hljs-keyword">user</span> defined <span class="hljs-keyword">by</span> the username config <span class="hljs-keyword">option</span>.<br><br>azure<br>transport_cert_store_name<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>Windows Azure Environment<br><br>Certificate store <span class="hljs-type">name</span> <span class="hljs-keyword">for</span> metadata certificates<br><br>cloudstack<br>metadata_base_url<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>http://<span class="hljs-number">10.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span>/<br><br>The base URL <span class="hljs-keyword">where</span> the service looks <span class="hljs-keyword">for</span> metadata<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>cloudstack_metadata_ip<br><br>password_server_port<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">integer</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-number">8080</span><br><br>The port number used <span class="hljs-keyword">by</span> the <span class="hljs-keyword">Password</span> <span class="hljs-keyword">Server</span>.<br><br>https_allow_insecure<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Whether <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span> the validation <span class="hljs-keyword">of</span> HTTPS certificates.<br><br>https_ca_bundle<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>The <span class="hljs-type">path</span> <span class="hljs-keyword">to</span> a CA_BUNDLE file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">with</span> certificates <span class="hljs-keyword">of</span> <span class="hljs-keyword">trusted</span> CAs.<br><br>add_metadata_private_ip_route<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br><span class="hljs-keyword">Add</span> a route <span class="hljs-keyword">for</span> the metadata ip address <span class="hljs-keyword">to</span> the gateway<br><br>config_drive<br>raw_hdd<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Look <span class="hljs-keyword">for</span> an ISO config drive <span class="hljs-keyword">in</span> raw HDDs<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>config_drive_raw_hhd<br><br><span class="hljs-built_in">Warning</span><br><br>This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> deprecated <span class="hljs-keyword">for</span> removal. Its <span class="hljs-keyword">value</span> may be silently ignored <span class="hljs-keyword">in</span> the future.<br><br>cdrom<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Look <span class="hljs-keyword">for</span> a config drive <span class="hljs-keyword">in</span> the attached cdrom drives<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>config_drive_cdrom<br><br><span class="hljs-built_in">Warning</span><br><br>This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> deprecated <span class="hljs-keyword">for</span> removal. Its <span class="hljs-keyword">value</span> may be silently ignored <span class="hljs-keyword">in</span> the future.<br><br>vfat<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br>Look <span class="hljs-keyword">for</span> a config drive <span class="hljs-keyword">in</span> VFAT filesystems<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>config_drive_vfat<br><br><span class="hljs-built_in">Warning</span><br><br>This <span class="hljs-keyword">option</span> <span class="hljs-keyword">is</span> deprecated <span class="hljs-keyword">for</span> removal. Its <span class="hljs-keyword">value</span> may be silently ignored <span class="hljs-keyword">in</span> the future.<br><br><span class="hljs-keyword">types</span><br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[‘vfat’, ‘iso’]<br><br>Supported formats <span class="hljs-keyword">of</span> a <span class="hljs-keyword">configuration</span> drive<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>config_drive_types<br><br>locations<br><span class="hljs-keyword">Type</span><br>list<br><br><span class="hljs-keyword">Default</span><br>[‘cdrom’, ‘hdd’, ‘<span class="hljs-keyword">partition</span>’]<br><br>Supported <span class="hljs-keyword">configuration</span> drive locations<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>config_drive_locations<br><br>ec2<br>metadata_base_url<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>http://<span class="hljs-number">169.254</span><span class="hljs-number">.169</span><span class="hljs-number">.254</span>/<br><br>The base URL <span class="hljs-keyword">where</span> the service looks <span class="hljs-keyword">for</span> metadata<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>ec2_metadata_base_url<br><br>add_metadata_private_ip_route<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br><span class="hljs-keyword">Add</span> a route <span class="hljs-keyword">for</span> the metadata ip address <span class="hljs-keyword">to</span> the gateway<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>ec2_add_metadata_private_ip_route<br><br>https_allow_insecure<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Whether <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span> the validation <span class="hljs-keyword">of</span> HTTPS certificates.<br><br>https_ca_bundle<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>The <span class="hljs-type">path</span> <span class="hljs-keyword">to</span> a CA_BUNDLE file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">with</span> certificates <span class="hljs-keyword">of</span> <span class="hljs-keyword">trusted</span> CAs.<br><br>gce<br>metadata_base_url<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>http://metadata.google.internal/computeMetadata/v1/<br><br>The base URL <span class="hljs-keyword">where</span> the service looks <span class="hljs-keyword">for</span> metadata<br><br>https_allow_insecure<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Whether <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span> the validation <span class="hljs-keyword">of</span> HTTPS certificates.<br><br>https_ca_bundle<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>The <span class="hljs-type">path</span> <span class="hljs-keyword">to</span> a CA_BUNDLE file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">with</span> certificates <span class="hljs-keyword">of</span> <span class="hljs-keyword">trusted</span> CAs.<br><br>maas<br>metadata_base_url<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>The base URL <span class="hljs-keyword">for</span> MaaS metadata<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>maas_metadata_url<br><br>oauth_consumer_key<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>‘’<br><br>The MaaS OAuth consumer key<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>maas_oauth_consumer_key<br><br>oauth_consumer_secret<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>‘’<br><br>The MaaS OAuth consumer secret<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>maas_oauth_consumer_secret<br><br>oauth_token_key<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>‘’<br><br>The MaaS OAuth token key<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>maas_oauth_token_key<br><br>oauth_token_secret<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>‘’<br><br>The MaaS OAuth token secret<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>maas_oauth_token_secret<br><br>https_allow_insecure<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Whether <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span> the validation <span class="hljs-keyword">of</span> HTTPS certificates.<br><br>https_ca_bundle<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>The <span class="hljs-type">path</span> <span class="hljs-keyword">to</span> a CA_BUNDLE file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">with</span> certificates <span class="hljs-keyword">of</span> <span class="hljs-keyword">trusted</span> CAs.<br><br>openstack<br>metadata_base_url<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>http://<span class="hljs-number">169.254</span><span class="hljs-number">.169</span><span class="hljs-number">.254</span>/<br><br>The base URL <span class="hljs-keyword">where</span> the service looks <span class="hljs-keyword">for</span> metadata<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>metadata_base_url<br><br>add_metadata_private_ip_route<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">True</span><br><br><span class="hljs-keyword">Add</span> a route <span class="hljs-keyword">for</span> the metadata ip address <span class="hljs-keyword">to</span> the gateway<br><br>Deprecated Variations<br><span class="hljs-keyword">Group</span><br><br><span class="hljs-type">Name</span><br><br><span class="hljs-keyword">DEFAULT</span><br><br>add_metadata_private_ip_route<br><br>https_allow_insecure<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Whether <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span> the validation <span class="hljs-keyword">of</span> HTTPS certificates.<br><br>https_ca_bundle<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>The <span class="hljs-type">path</span> <span class="hljs-keyword">to</span> a CA_BUNDLE file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">with</span> certificates <span class="hljs-keyword">of</span> <span class="hljs-keyword">trusted</span> CAs.<br><br>ovf<br>config_file_name<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>ovf-env.xml<br><br><span class="hljs-keyword">Configuration</span> file <span class="hljs-type">name</span><br><br>drive_label<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>OVF ENV<br><br>Look <span class="hljs-keyword">for</span> <span class="hljs-keyword">configuration</span> file <span class="hljs-keyword">in</span> drives <span class="hljs-keyword">with</span> this label<br><br>ns<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>oe<br><br>Namespace prefix <span class="hljs-keyword">for</span> ovf environment<br><br>packet<br>metadata_base_url<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>https://metadata.packet.net/<br><br>The URL <span class="hljs-keyword">where</span> the service looks <span class="hljs-keyword">for</span> metadata<br><br>https_allow_insecure<br><span class="hljs-keyword">Type</span><br><span class="hljs-type">boolean</span><br><br><span class="hljs-keyword">Default</span><br><span class="hljs-keyword">False</span><br><br>Whether <span class="hljs-keyword">to</span> <span class="hljs-keyword">disable</span> the validation <span class="hljs-keyword">of</span> HTTPS certificates.<br><br>https_ca_bundle<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br><br>The <span class="hljs-type">path</span> <span class="hljs-keyword">to</span> a CA_BUNDLE file <span class="hljs-keyword">or</span> directory <span class="hljs-keyword">with</span> certificates <span class="hljs-keyword">of</span> <span class="hljs-keyword">trusted</span> CAs.<br><br>vmwareguestinfo<br>vmware_rpctool_path<br><span class="hljs-keyword">Type</span><br>string<br><br><span class="hljs-keyword">Default</span><br>%ProgramFiles%/VMware/VMware Tools/rpctool.exe<br><br>The <span class="hljs-keyword">local</span> <span class="hljs-type">path</span> <span class="hljs-keyword">where</span> VMware rpctool <span class="hljs-keyword">is</span> <span class="hljs-built_in">found</span><br></code></pre></td></tr></table></figure>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Openstack/" class="category-chain-item">Openstack</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Openstack/" class="print-no-link">#Openstack</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>cloudbase-init</div>
      <div>http://maitianxin.github.io/2020/10/19/openstack/cloud_base-int/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Matianxin</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2020年10月19日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/10/20/openstack/windows_cloudbase_init/" title="Windows CloudBase-Init 安装使用及配置说明">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Windows CloudBase-Init 安装使用及配置说明</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/10/13/other/iso_module/" title="网络ISO七层模型图">
                        <span class="hidden-mobile">网络ISO七层模型图</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>By 圣特伦特星 </span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>2024</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
