---
title: 测试不同操作系统制作快照的时间
tags: [openstack]
categories: Openstack
description: 使用Openstack创建快照功能测试不同操作系统完成时间
date: 2021/7/15 14:30:00
---

Openstack命令行：
**glance image-create**

调用novaclient API：
**novaclient.servers.create_image**

实例镜像状态变化：

queued（已排队） -> saving（保存中） -> active（已运行） / error（错误）


  系统        时间         详情               资源占用情况
---------- ------------ ----------------- ----------------------------------------
 Centos7    **17.6s**    queued: 10.5s     1VCPU 1G内存 10G磁盘 镜像磁盘745MB
                         saving:  6.3s     1网卡：虚拟业务
---------- ------------ ----------------- ----------------------------------------
 Win7       **3m46.4s**  queued: 2m 39.2s  1VCPU 1G内存 20G磁盘 镜像磁盘8.7GB
                         saving: 1m 6.6s   1网卡：虚拟管控
---------- ------------ ----------------- ----------------------------------------
 凝思8       **1m33s**    queued: 58.5s     2VCPU 2G内存 20G磁盘 镜像磁盘3.3GB
                         saving: 1m6.6s    1网卡：虚拟管控
---------- ------------ ----------------- ----------------------------------------
 虚拟路由器   **20.2s**    queued: 13.5s     1VCPU 1G内存 20G磁盘 镜像磁盘857MB
                         saving:  6.3s     4网卡：其它网络，虚拟管控，虚拟业务，虚拟业务
---------- ------------ ----------------- ----------------------------------------
 pfSense    **18.1s**    queued: 11.4s     2VCPU 2G内存 20G磁盘 镜像磁盘857MB
                         saving:  6.1s     4网卡：其它网络，虚拟管控，虚拟业务，虚拟业务
---------- ------------ ----------------- ----------------------------------------
 纵向        **17.1s**    queued: 11.5s     1VCPU 1G内存 10G磁盘 镜像磁盘652MB
                         saving:  5.3s     4网卡：虚拟业务，虚拟业务，虚拟管控，外部网络
---------- ------------ ----------------- ----------------------------------------
 隔离        **12.9s**    queued: 8.3s      1VCPU 1G内存 10G磁盘 镜像磁盘≈540MB
                         saving: 4.2s      5网卡：虚拟业务，虚拟业务，虚拟管控，虚拟业务，虚拟业务
---------- ------------ ----------------- ----------------------------------------
 监测装置    **39.1s**     queued: 27.2s     1VCPU 2G内存 25G磁盘 镜像磁盘1.4GB
                         saving: 11.5s      2网卡：虚拟业务，虚拟管控
---------- ------------ ----------------- ----------------------------------------
 网安平台    **13m3.3s**   queued: 7m3s      8VCPU 16G内存 100G磁盘 镜像磁盘21GB
                         saving: 5m59.7s    2网卡：虚拟业务，外部网络
---------- ------------ ----------------- ----------------------------------------

根据上述测试结果总结：
1、创建快照（制作镜像）所需时间与磁盘镜像占用空间大小成正比，
    也就是说镜像占用磁盘空间越大，创建快照时间越长。
2、创建快照所需时间与实例类型及实例网卡个数无关。
